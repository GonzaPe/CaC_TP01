<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand&family=Ubuntu&display=swap" rel="stylesheet"><!-- Google Fonts -->
    <script src="https://kit.fontawesome.com/f5ae7afca2.js" crossorigin="anonymous"></script><!-- FontAwesome -->
    <link rel="stylesheet" href="estilos.css">
    <link rel="icon" type="image/vnd.microsoft.icon" href="img/Healthcare-Diabetes.ico">
    <title>Calculadora</title>
</head>

<body>

    <nav>
        <div class="contenedorMenu">
            <a class="menu" href="index.html"><i class="fa-solid fa-timeline"></i> Un poco de info</a>
            <a class="menu" href="02calculadora.html"><i class="fa-solid fa-calculator"></i> Calculadora</a>
            <a class="menu" href="03contacto.html"><i class="fa-solid fa-envelope"></i> Contactanos!</a>
        </div>
    </nav>

    <main class="padre">
        <fieldset>
            <legend>Calculadora</legend>
            <p>El objetivo de esta calculadora es el de indicar la cantidad de unidades de insulina que debas aplicarte para mantenerte en un rango entre 90 a 140 unidades de glucosa en sangre de acuerdo a las cantidades de glucosa por unidades de insulina indicadas por el/la profesional a tu cargo.</p>
            <p>Se buscará que estas unidades estén cercanas a 90 y, de encontrarse dentro del rango, evitar la aplicación de insulina.</p>
        <form>
            <fieldset name="fglucosa">
                <legend>Sobre la glucosa</legend>
                <p>Unidades de glucosa en sangre</p>
                <input id="glucEnSangre" type="number" name="glucosaEnSangre" minlength="1" maxlength="4" placeholder="(solo números)mg/100 ml">
                <p>¿Cuántas gramos de carbohidratos por unidades de insulina te indicaron?</p>
                <input id="carboPorInsu" type="number" name="carbohidratosPorInsulina" minlength="1" maxlength="3" placeholder="(solo números)">
            </fieldset>
            <fieldset name="fcarbohidrato">
                <legend>Sobre los carbohidratos</legend>
                <p>Cantidad de carbohidratos a ingerir</p>
                <input id="carboAIngerir" type="number" name="carbohidratos" minlength="1" maxlength="4" placeholder="(solo números)">
                <a href="https://www.fundaciondiabetes.org/upload/publicaciones_ficheros/71/TABLAHC.pdf" target="_blank">Si tenés dudas sobre la cantidad de carbohidratos clickeá acá</a>
            </fieldset>
        </form>

        <script>
            var insuAplica, finalGlucosa, glucEnSangre, carboPorInsu, carboAIngerir, aumentaGluco;
            function obtenerDatos(){
/*                 if (Number.isNaN(document.getElementById("glucEnSangre").value)){
                    return alert("Por favor ingresá solo números.")
                } */
                glucEnSangre = parseInt(document.getElementById("glucEnSangre").value);
                carboPorInsu = parseInt(document.getElementById("carboPorInsu").value);
                carboAIngerir = parseInt(document.getElementById("carboAIngerir").value);
                aumentaGluco = ((50/carboPorInsu) * carboAIngerir);
                if (glucEnSangre <= 20) {
                    return alert("Con ese valor de glucosa en sangre seguramente estarías en coma, por favor colocá algún valor válido!")
                } else if (carboPorInsu <= 0) {
                    return alert("Necesitamos saber cuanta insulina te recomendaron aplicarte!")
                } else if (carboAIngerir < 0) {
                    return alert('Dificilmente se puedan "devolver" carbohidratos...')
                } else if (Number.isNaN(glucEnSangre)||Number.isNaN(aumentaGluco)) {
                    return alert("Indicá valores válidos")
                } else if ((glucEnSangre + aumentaGluco) > 140) {
                    insuAplica = Math.ceil((glucEnSangre + aumentaGluco - 120)/(50));
                    finalGlucosa = (glucEnSangre + aumentaGluco) - insuAplica * 50;
                } else {
                    insuAplica = 0;
                    finalGlucosa = glucEnSangre + aumentaGluco;
                }
                return alert("Aplicate " + insuAplica + " dosis de insulina para quedar en " + parseInt(finalGlucosa) + " de glucosa en sangre");
            }
        </script>
        <input type="submit" value="Enviar" onclick="validacion()">
        <input type="submit" value="Enviar" onclick="obtenerDatos()">
        </fieldset>
    </main>
</body>

<footer class="footer">
    <div class="socialNet">
        <a href="https://www.facebook.com/colgadolandia" target="_blank"><i class="fa-brands fa-facebook-square"></i></a>
        <a href="https://twitter.com/1987delmonton" target="_blank"><i class="fa-brands fa-twitter-square"></i></a>
        <a href="https://www.linkedin.com/in/gonzalo-p%C3%A9rez-30b668111/" target="_blank"><i class="fa-brands fa-linkedin"></i></a>
        <a href="https://github.com/GonzaPe" target="_blank"><i class="fa-brands fa-github-square"></i></a>
        <a href="https://es.stackoverflow.com/users/284736/gonzalo-perez" target="_blank"><i class="fa-brands fa-stack-overflow"></i></a>
    </div>
    <div class="copyright">
        <p>&#169;2022 Gonzalo Pérez</p>
    </div>
</footer>

</html>